{"version":3,"sources":["graphql/queries.js","graphql/mutations.js","graphql/subscriptions.js","components/Mapbox_TW.js","components/usePlan.js","components/AddPlace.js","components/SearchInfo.js","containers/TourMap.js","img/place-of-destination.png","img/bucket_list.jpg","containers/TourPlan.js","index.js","containers/Login.js","img/point_left.png"],"names":["USERNAME_QUERY","gql","MARKER_QUERY","USERPLAN_QUERY","SIGNIN_QUERY","ADD_MARKER_MUTATION","DELETE_MARKER_MUTATION","UPDATE_MARKER_MUTATION","NEWPLAN_MUTATION","DELETE_PLAN_MUTATION","NEWSPOT_MUTATION","DELETE_SPOT_MUTATION","UPDATE_SPOT_STARTTIME_MUTATION","UPDATE_SPOT_ENDTIME_MUTATION","SIGNUP_MUTATION","MARKERS_SUBSCRIPTION","PLAN_SUBSCRIPTION","mapboxgl","accessToken","process","console","log","MapBox","username","markerCallback","insertionMode","setInsertionMode","setTitle","title","setDescription","description","useState","lng","lat","zoom","View","setView","useQuery","variables","subscribeMarker","map","setMap","mapContainer","useRef","data","subscribeToMore","currentMarker","_setCurrentMarker","setCurrentMarker","e","setTest","markerLoaded","setMarkerLoaded","useEffect","Map","container","current","style","center","on","getCenter","toFixed","getZoom","resize","geocoder","MapboxGeocoder","addControl","initializeMap","geocoderResult","remove","JSON","parse","lastSelected","place_name","linLat","mapMarker","_lngLat","marker","Marker","setLngLat","addTo","clickPoint","lngLat","once","off","geometry","coordinates","popup","Popup","setHTML","properties","setPopup","_id","getElement","addEventListener","document","updateQuery","prev","newData","subscriptionData","mutation","filter","color","className","position","right","onClick","ref","el","usePlan","_userId","planList","error","usernameData","Username","plan","UserPlan","subscribePlan","prev_item","Layout","Header","Content","Footer","Sider","NEW_ITEM","Option","Select","AddtoPlan","list1Value","setList1Value","showList1","setshowList1","setPlanId","planId","list1Options","useMutation","newPlan","setDisplayValue","v","onConfirm","inputValue","a","trim","includes","list1SelectOptions","o","value","width","onChange","show","text","showCancelButton","type","inputPlaceholder","animation","validationMsg","onCancel","onEscapeKey","onOutsideClick","AddPlace","markerContentCallback","addSpot","deleteMarker","updateMarker","addMarker","onclick","alert","CustomTitle","CustomDescription","marker_id","newTitle","newDescription","getPopup","planID","markerID","TextArea","Input","placeholder","allowClear","target","marginTop","rows","size","bottom","Search","Menu","SubMenu","TourMap","props","match","params","userId","_setInsertionMode","showUsermMenu","setShowUsermMenu","history","useHistory","Fragment","minWidth","fontSize","theme","mode","defaultSelectedKeys","Item","icon","UserOutlined","textAlign","height","padding","margin","minHeight","top","hidden","zindex","EnvironmentOutlined","left","push","location","pathname","ExportOutlined","httpLink","HttpLink","uri","wsLink","WebSocketLink","options","reconnect","link","split","query","definition","getMainDefinition","kind","operation","client","ApolloClient","cache","InMemoryCache","restore","ReactDOM","render","exact","path","component","setUsername","password","setPassword","register","setRegister","signIndata","signInError","signUp","regisUsername","setRegisUsername","regisPassword","setRegisPassword","regisRetype","setRegisRetype","signIn","message","enter_registerAccount","event","keyCode","registerAccount","name","initialValues","remember","onFinish","values","rules","required","prefix","LockOutlined","valuePropName","noStyle","htmlType","onClose","visible","bodyStyle","paddingBottom","footer","marginRight","layout","hideRequiredMark","gutter","label","onKeyUp","planState","deletePlan","deleteSpot","updateSpotStartTime","updateSpotEndTime","re","setre","currentPlan","setCurrentPlan","currentSpot","setCurrentSpot","initialPlan","setInitialPlan","newTime","setTime","newStartTime","setnewStartTime","newEndTime","setnewEndTime","handleStartChange","ev","valid","dt","handleEndChange","defaultOpenKeys","borderRight","i","display","alignItems","length","src","alt","spots","Date","startTime","toLocaleString","endTime","time","toString","substring","fontFamily","background","bucketList","getElementById"],"mappings":"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","file":"static/js/main.17c5fa80.chunk.js","sourcesContent":["import { gql } from 'apollo-boost'\r\n\r\nexport const USERNAME_QUERY = gql`\r\n  query Username(\r\n    $_id: ID!\r\n  ) {\r\n    Username(_id: $_id)\r\n  }\r\n`\r\n\r\nexport const MARKER_QUERY = gql`\r\n  query Marker (\r\n    $username: String!\r\n  ) {\r\n    Marker(\r\n        username: $username\r\n    ){\r\n      username\r\n      properties{\r\n        title\r\n        description\r\n      }\r\n      geometry{\r\n        coordinates\r\n      }\r\n      _id        \r\n    }\r\n  }\r\n`\r\n// return [Marker!]!\r\n\r\nexport const USERPLAN_QUERY = gql`\r\n  query UserPlan (\r\n    $_userId: ID!\r\n  ) {\r\n    UserPlan(\r\n        _userId: $_userId\r\n    ){\r\n    username\r\n    title\r\n    spots{\r\n      _id\r\n      startTime\r\n      endTime\r\n      location{\r\n        properties{\r\n          title\r\n          description\r\n        }\r\n        geometry{\r\n          coordinates\r\n        }\r\n        _id\r\n      }\r\n    }\r\n    _id\r\n  }\r\n}\r\n`\r\n// return [Plan!]!\r\n\r\nexport const PLAN_QUERY = gql`\r\n  query Plan (\r\n    $_id: ID!\r\n  ) {\r\n    Plan(\r\n        _id: $_id\r\n    ){\r\n      username\r\n      title\r\n      spots\r\n      _id\r\n    }\r\n  }\r\n`\r\n// return Plan!\r\n\r\nexport const SIGNIN_QUERY = gql`\r\n  query signIn (\r\n    $username: String!\r\n    $password: String!\r\n  ) {\r\n    signIn(\r\n        username: $username\r\n        password: $password\r\n    )\r\n  }\r\n`\r\n// return Boolean!","import { gql } from 'apollo-boost'\r\n\r\nexport const ADD_MARKER_MUTATION = gql`\r\n  mutation addMarker(\r\n    $username: String!\r\n    $title: String!\r\n    $coordinates: [Float!]!\r\n    $description: String\r\n  ) {\r\n    addMarker(\r\n      marker: {\r\n        username: $username\r\n        title: $title\r\n        coordinates: $coordinates\r\n        description: $description\r\n      }\r\n    )\r\n  }\r\n`\r\n\r\nexport const DELETE_MARKER_MUTATION = gql`\r\n  mutation deleteMarker(\r\n    $_id: ID!\r\n  ) {\r\n    deleteMarker(\r\n      _id: $_id\r\n    )\r\n  }\r\n`\r\n\r\nexport const UPDATE_MARKER_MUTATION = gql`\r\n  mutation updateMarker(\r\n    $_id: ID!\r\n    $newTitle: String\r\n    $newDescription: String\r\n  ) {\r\n    updateMarker(\r\n      _id: $_id \r\n      newTitle: $newTitle\r\n      newDescription: $newDescription\r\n    )\r\n  }\r\n`\r\n\r\nexport const NEWPLAN_MUTATION = gql`\r\n  mutation newPlan(\r\n    $username: String!\r\n    $title: String!\r\n  ) {\r\n    newPlan(\r\n      username: $username\r\n      title: $title\r\n    )\r\n  }\r\n`\r\nexport const RENAME_PLAN_MUTATION = gql`\r\n  mutation renamePlan(\r\n    $_id: ID!\r\n    $newTitle: String!\r\n  ) {\r\n    renamePlan(\r\n      _id: $_id\r\n      title: $newTitle\r\n    ) {\r\n      title\r\n    }\r\n  }\r\n`\r\n\r\nexport const DELETE_PLAN_MUTATION = gql`\r\n  mutation deletePlan(\r\n    $_id: ID!\r\n  ) {\r\n    deletePlan(\r\n      _id: $_id\r\n    )\r\n  }\r\n`\r\n\r\nexport const NEWSPOT_MUTATION = gql`\r\n  mutation newSpot(\r\n    $planID: ID!\r\n    $markerID: ID!\r\n  ) {\r\n    newSpot(\r\n      planID: $planID\r\n      markerID: $markerID\r\n    )\r\n  }\r\n`\r\nexport const DELETE_SPOT_MUTATION = gql`\r\n  mutation deleteSpot(\r\n    $_id: ID!\r\n  ) {\r\n    deleteSpot(\r\n      _id: $_id\r\n    )\r\n  }\r\n`\r\nexport const UPDATE_SPOT_STARTTIME_MUTATION = gql`\r\n  mutation updateSpotStartTime(\r\n    $_id: ID!\r\n    $time: String!\r\n  ) {\r\n    updateSpotStartTime(\r\n      _id: $_id\r\n      time: $time   \r\n    )\r\n  }\r\n`\r\nexport const UPDATE_SPOT_ENDTIME_MUTATION = gql`\r\n  mutation updateSpotEndTime(\r\n    $_id: ID!\r\n    $time: String!\r\n  ) {\r\n    updateSpotEndTime(\r\n      _id: $_id\r\n      time: $time\r\n    )\r\n  }\r\n`\r\n\r\nexport const SIGNUP_MUTATION = gql`\r\n  mutation signUp(\r\n    $username: String!\r\n    $password: String!\r\n  ) {\r\n    signUp(\r\n      username: $username\r\n      password: $password\r\n    )\r\n  }\r\n`\r\n\r\n","import { gql } from 'apollo-boost'\r\n\r\nexport const MARKERS_SUBSCRIPTION = gql`\r\nsubscription subscribeMarker ($username: String!) {\r\n    subscribeMarker (username: $username) {\r\n        mutation\r\n        data {\r\n            username\r\n            properties{\r\n                title\r\n                description\r\n            }\r\n            geometry{\r\n                coordinates\r\n            }\r\n            _id\r\n        }\r\n    }\r\n}\r\n`\r\n\r\nexport const PLAN_SUBSCRIPTION = gql`\r\nsubscription subscribePlan($username: String!)\r\n{\r\n  subscribePlan(username:$username){\r\n    mutation\r\n    data{\r\n      username\r\n      title\r\n      spots{\r\n        startTime\r\n        endTime\r\n        location{\r\n          username\r\n          properties{\r\n            title\r\n            description\r\n          }\r\n          geometry{\r\n            coordinates\r\n          }\r\n          _id\r\n        }\r\n        _id\r\n      }\r\n      _id\r\n    }\r\n  }\r\n}\r\n`\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { useQuery, useMutation } from '@apollo/react-hooks'\r\nimport mapboxgl from \"mapbox-gl\";\r\nimport * as MapboxGeocoder from '@mapbox/mapbox-gl-geocoder';\r\nimport { Button } from 'antd';\r\nimport \"./site.css\"\r\nimport env from \"react-dotenv\";\r\n\r\nimport {\r\n// for query\r\nMARKER_QUERY,\r\n// for mutation\r\n// ADD_MARKER_MUTATION,\r\n// DELETE_MARKER_MUTATION,\r\n// UPDATE_MARKER_MUTATION,\r\n// for subscription\r\nMARKERS_SUBSCRIPTION\r\n} from '../graphql'\r\n\r\nmapboxgl.accessToken = process.env.REACT_APP_ACCESS_TOKEM\r\nconsole.log(mapboxgl.accessToken)\r\nconst MapBox = ({username, markerCallback, insertionMode, setInsertionMode, title, setTitle, description, setDescription}) => {\r\n    \r\n    const [View, setView] = useState({\r\n        lng: 121.55,\r\n        lat: 25.05,\r\n        zoom: 12\r\n    })\r\n    const { subscribeMarker, ...markers } = useQuery(\r\n        MARKER_QUERY,\r\n        { variables: { username: username } }\r\n        )\r\n    // const [insertionMode, setInsertionMode] = useState(false)\r\n\r\n\r\n    const [map, setMap] = useState(null);\r\n    const mapContainer = useRef(null);\r\n    const {data, subscribeToMore} = useQuery(MARKER_QUERY, {variables:{username: username}})\r\n\r\n    const [currentMarker, _setCurrentMarker] = useState(null);\r\n    const setCurrentMarker = e => {_setCurrentMarker(e); markerCallback(e);} \r\n    const [test, setTest] = useState(0);\r\n    const [markerLoaded, setMarkerLoaded] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const initializeMap = ({ setMap, mapContainer}) => {\r\n            const map = new mapboxgl.Map({\r\n                container: mapContainer.current,\r\n                style: \"mapbox://styles/mapbox/streets-v11\", // stylesheet location\r\n                center: [View.lng, View.lat],\r\n                zoom: View.zoom\r\n                });\r\n\r\n            map.on(\"move\", () => {\r\n                setView({lng: map.getCenter().lng.toFixed(4), lat: map.getCenter().lat.toFixed(4), zoom:map.getZoom().toFixed(2)})\r\n                setTest(4)\r\n            });\r\n\r\n            map.on(\"load\", () => {\r\n                setMap(map);\r\n                map.resize();\r\n            });\r\n\r\n            var geocoder = new MapboxGeocoder({\r\n                accessToken: mapboxgl.accessToken,\r\n                mapboxgl: mapboxgl\r\n            })\r\n            map.geocoder = geocoder\r\n            map.addControl(geocoder)\r\n            // map.addControl(\r\n            //     new MapboxGeocoder({\r\n            //     accessToken: mapboxgl.accessToken,\r\n            //     mapboxgl: mapboxgl\r\n            //     })\r\n            // );  \r\n\r\n        }\r\n        if (!map) initializeMap({ setMap, mapContainer});\r\n    }, [map]);\r\n\r\n    useEffect(()=>{\r\n        if(!map) return\r\n        map.geocoder.on(\"result\", ()=>{\r\n            if(currentMarker){\r\n                if(currentMarker.geocoderResult || insertionMode){\r\n                    currentMarker.remove()\r\n                }\r\n            }\r\n            setInsertionMode(false)\r\n            setTitle(JSON.parse(map.geocoder.lastSelected).place_name)\r\n            const linLat = map.geocoder.mapMarker._lngLat\r\n            map.geocoder.mapMarker.remove()\r\n\r\n            var marker = new mapboxgl.Marker()\r\n            .setLngLat(linLat)\r\n            .addTo(map)\r\n\r\n            marker.geocoderResult = true\r\n            setCurrentMarker(marker)\r\n        })\r\n    },[map, currentMarker])\r\n\r\n    useEffect(()=>{\r\n        if(map && insertionMode){\r\n            const clickPoint = (e) => {\r\n                if(currentMarker) currentMarker.remove()\r\n\r\n                var marker = new mapboxgl.Marker()\r\n                .setLngLat([e.lngLat.lng, e.lngLat.lat])\r\n                .addTo(map)\r\n\r\n                setTitle(\"\")\r\n                setDescription(\"\")\r\n                \r\n                setCurrentMarker(marker)\r\n            };\r\n            map.once('click', clickPoint);\r\n            return ()=>{map.off('click', clickPoint);}\r\n        }\r\n        // else if(map && !insertionMode && currentMarker){\r\n        //     currentMarker.remove()\r\n        //     setCurrentMarker(null)\r\n        // }\r\n    }, [map, insertionMode, currentMarker]);\r\n\r\n    if(map && data && !markerLoaded){\r\n        setMarkerLoaded(true)\r\n        data.Marker.map(e=>{\r\n            const linLat = e.geometry.coordinates\r\n            var popup = new mapboxgl.Popup()\r\n            .setHTML(`<h3>${e.properties.title}<h3><p>${e.properties.description}</p>`);\r\n\r\n            var marker = new mapboxgl.Marker()\r\n            .setLngLat(linLat)\r\n            .setPopup(popup)\r\n            .addTo(map)\r\n\r\n            marker._id = e._id\r\n\r\n            marker.getElement().addEventListener('click', () => {\r\n                    setCurrentMarker(marker)\r\n                    setTitle(e.properties.title)\r\n                    setDescription(e.properties.description)\r\n                });\r\n        })\r\n    }\r\n\r\n    useEffect(()=>{\r\n        if(!subscribeToMore || !map) return;\r\n        subscribeToMore({\r\n            document: MARKERS_SUBSCRIPTION,\r\n            variables: {username: username},\r\n            updateQuery: (prev, { subscriptionData }) => {\r\n                const newData = subscriptionData.data.subscribeMarker\r\n                switch(newData.mutation){\r\n                    case \"NEW\":\r\n                        const linLat = newData.data.geometry.coordinates\r\n                        var popup = new mapboxgl.Popup()\r\n                        .setHTML(`<h3>${newData.data.properties.title}<h3><p>${newData.data.properties.description}</p>`);\r\n\r\n                        var marker = new mapboxgl.Marker()\r\n                        .setLngLat(linLat)\r\n                        .setPopup(popup)\r\n                        .addTo(map)\r\n\r\n                        marker._id = newData.data._id\r\n\r\n                        marker.getElement().addEventListener('click', () => {\r\n                            setCurrentMarker(marker)\r\n                            setTitle(newData.data.properties.title)\r\n                            setDescription(newData.data.properties.description)\r\n                        });\r\n                        return {Marker:[...prev.Marker, newData.data]}\r\n                    break\r\n                    case \"DELETE\":\r\n                        return {Marker: prev.Marker.filter(e=>e._id !== newData.data._id)}\r\n                    case \"UPDATE\":\r\n                        return {Marker: prev.Marker.map(e=>{\r\n                            if(e._id !== newData.data._id)\r\n                                return e\r\n                            return newData.data\r\n                        })}\r\n                    break\r\n                    default:\r\n                        console.log(`Warning: unknown mutation ${newData.mutation}`)\r\n                    break\r\n                }\r\n            }\r\n        })\r\n    }, [map])\r\n\r\n    const buttonOnclick = () => {\r\n        if (currentMarker && (insertionMode || currentMarker.geocoderResult)){\r\n            currentMarker.remove()\r\n        }\r\n        setCurrentMarker(null)\r\n        setInsertionMode(!insertionMode)\r\n    }\r\n    const color = insertionMode? \"green\" : \"white\"\r\n    return (\r\n        <div>\r\n            <div className='sidebarStyle'>\r\n                <div>Longitude: {View.lng} | Latitude: {View.lat} | Zoom: {View.zoom} </div>\r\n            </div>\r\n            <Button style={{position: \"relative\", right: \"0px\",\"background-color\":color}}\r\n             onClick={buttonOnclick}>+</Button>\r\n            <div ref={el => (mapContainer.current = el)} className='mapContainer' />\r\n        </div>)\r\n}\r\n\r\nexport default MapBox","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { useQuery, useMutation } from '@apollo/react-hooks'\r\n\r\nimport {\r\n//     // for query\r\n//     MARKER_QUERY,\r\n//     PLAN_QUERY,\r\n    USERNAME_QUERY,\r\n    USERPLAN_QUERY,\r\n    PLAN_SUBSCRIPTION\r\n    // SIGNIN_QUERY,\r\n//     // for mutation\r\n//     ADD_MARKER_MUTATION,\r\n//     DELETE_MARKER_MUTATION,\r\n//     UPDATE_MARKER_MUTATION,\r\n//     NEW_PLAN_MUTATION,\r\n//     RENAME_PLAN_MUTATION,\r\n//     DELETE_PLAN_MUTATION,\r\n//     NEW_SPOT_MUTATION,\r\n//     delete_Spot_MUTATION,\r\n//     UPDATE_SPOTSTARTTIME_MUTATION,\r\n//     UPDATE_SPOTENDTIME_MUTATION,\r\n    // SIGNUP_MUTATION\r\n//     // for subscription\r\n  } from '../graphql'\r\n\r\nexport default function usePlan(_userId){\r\n    const {data:planList, error, subscribeToMore} = useQuery(USERPLAN_QUERY, {variables:{_userId:_userId}})\r\n    const {data:usernameData} = useQuery(USERNAME_QUERY, {variables:{_id:_userId}})\r\n    const username = usernameData? usernameData.Username : \"\"\r\n    const plan = planList? planList.UserPlan : []\r\n    useEffect(()=>{\r\n        subscribeToMore({\r\n            document: PLAN_SUBSCRIPTION,\r\n            variables: {username: username},\r\n            updateQuery: (prev, { subscriptionData }) => {\r\n                const newData = subscriptionData.data.subscribePlan\r\n                var newArray\r\n                const prev_item = prev ? prev.UserPlan : []\r\n                switch(newData.mutation){\r\n                    case \"NEW\":\r\n                        return {UserPlan:[...prev_item, newData.data]}\r\n                    break\r\n                    case \"DELETE\":\r\n                        newArray = prev.UserPlan.filter(e=>e._id !== newData.data._id)\r\n                        return {UserPlan:newArray}\r\n                    break\r\n                    case \"UPDATE\":\r\n                        newArray = prev.UserPlan.map(e=>{\r\n                            if(e.title !== newData.data.title)\r\n                                return e\r\n                            console.log(newData)\r\n                            return newData.data\r\n                        })\r\n                        return {\"UserPlan\":newArray}\r\n                    break\r\n                    default:\r\n                        console.log(`Warning: unknown mutation ${newData.mutation}`)\r\n                    break\r\n                }\r\n            }\r\n        })\r\n    }, [username, subscribeToMore])\r\n    return {plan, error, username}\r\n}","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { useQuery, useMutation } from '@apollo/react-hooks'\r\nimport 'antd/dist/antd.css'\r\nimport { Input, Layout, Menu, Breadcrumb, Button, Card, Select } from 'antd';\r\nimport { TagOutlined, CheckOutlined} from '@ant-design/icons';\r\nimport SweetAlert from \"react-bootstrap-sweetalert\";\r\nimport usePlan from '../components/usePlan'\r\nimport mapboxgl from \"mapbox-gl\";\r\n\r\nimport {\r\n// for query\r\n// MARKER_QUERY,\r\n// for mutation\r\nADD_MARKER_MUTATION,\r\nDELETE_MARKER_MUTATION,\r\nUPDATE_MARKER_MUTATION,\r\nNEWSPOT_MUTATION,\r\nNEWPLAN_MUTATION,\r\n// for subscription\r\n} from '../graphql'\r\n\r\nconst { Header, Content, Footer, Sider } = Layout;\r\n\r\nconst AddPlace = ({username, currentMarker, setCurrentMarker, markerContentCallback, insertionMode, plan, title, setTitle, description, setDescription}) => {\r\n  const setCurrentMarkerContent = e => { markerContentCallback(e);} \r\n  const [planId, setPlanId] = useState(\"\")\r\n  const [list1Value, setList1Value] = useState(\"\")\r\n  const [showList1, setshowList1] = useState(false)\r\n  const [addSpot] = useMutation(NEWSPOT_MUTATION)\r\n  const [deleteMarker] = useMutation(DELETE_MARKER_MUTATION)\r\n  const [updateMarker] = useMutation(UPDATE_MARKER_MUTATION)\r\n  const [addMarker] = useMutation(ADD_MARKER_MUTATION)\r\n  const deleteOnclick = () => {\r\n    const marker_id = currentMarker._id\r\n    deleteMarker({variables:{_id:marker_id}})\r\n    currentMarker.remove()\r\n    setCurrentMarker(null)\r\n  }\r\n  const onclick = async () => {\r\n    if(!currentMarker) {\r\n      alert(\"select a marker to add\")\r\n      return\r\n    }\r\n    if(title === \"\"){\r\n      // alert(\"Please input a title\")\r\n      // return\r\n      setTitle(\"Untitled\")\r\n    }\r\n    if(description === \"\"){\r\n      setDescription(\"No description\")\r\n    }\r\n    const CustomTitle = title === \"\" ? \"Untitled\" : title\r\n    const CustomDescription = description === \"\" ? \"No description\" : description\r\n    const {lng, lat} = currentMarker._lngLat\r\n    var marker_id = currentMarker._id\r\n    if(currentMarker.geocoderResult){\r\n      marker_id = await addMarker({variables:{\r\n        username: username,\r\n        title: CustomTitle,\r\n        coordinates: [currentMarker._lngLat.lng, currentMarker._lngLat.lat],\r\n        description: CustomDescription\r\n      }})\r\n      currentMarker.geocoderResult = null\r\n      marker_id = marker_id.data.addMarker\r\n    }\r\n    else if(insertionMode){\r\n      marker_id = await addMarker({variables:{\r\n        username: username,\r\n        title: CustomTitle,\r\n        coordinates: [lng, lat],\r\n        description: CustomDescription\r\n      }})\r\n      marker_id = marker_id.data.addMarker\r\n    }\r\n    else{\r\n      updateMarker({variables:{\r\n        _id:marker_id,\r\n        newTitle: CustomTitle,\r\n        newDescription: CustomDescription\r\n      }})\r\n      if(currentMarker.getPopup())\r\n        currentMarker.getPopup().setHTML(`<h3>${CustomTitle}<h3><p>${CustomDescription}</p>`);\r\n      else{\r\n        var popup = new mapboxgl.Popup()\r\n            .setHTML(`<h3>${CustomTitle}<h3><p>${CustomDescription}</p>`);\r\n        currentMarker.setPopup(popup)\r\n      }\r\n    }\r\n    if(marker_id !== \"\" && planId !== \"\"){\r\n      addSpot({variables:{\r\n        planID: planId,\r\n        markerID: marker_id\r\n      }})\r\n    }\r\n  }\r\n  const { TextArea } = Input;\r\n  return (\r\n    <Card title=\"Add New Marker\">\r\n      <Card type=\"inner\" title=\"Title\">\r\n        <Input placeholder=\"set your plan title\" allowClear\r\n              onChange={(e) => {setTitle(e.target.value)}}\r\n              value={title} ></Input>\r\n      </Card>\r\n      <Card\r\n        style={{ marginTop: 16 }}\r\n        type=\"inner\"\r\n        title=\"Descriptions\"\r\n      >\r\n        <TextArea TextArea rows={4} placeholder=\"set your plan descriptions\" allowClear\r\n                  value={description}\r\n                  onChange={(e) => {setDescription(e.target.value)}}></TextArea> \r\n      </Card>\r\n      <Card  \r\n        style={{ marginTop: 16 }}\r\n        type=\"inner\"\r\n        title=\"My Plan List\">\r\n        <AddtoPlan plan={plan} list1Value={list1Value} setList1Value={setList1Value}\r\n                showList1={showList1} setshowList1={setshowList1} username={username}\r\n                planId={planId} setPlanId={setPlanId}></AddtoPlan>\r\n      </Card>\r\n      <br></br>\r\n      {insertionMode || !currentMarker ? null : (\r\n      <div>\r\n        <Button size={\"small\"} onClick={deleteOnclick} style={{position: \"absolute\", right: \"90px\", bottom: \"10px\"}}>Delete</Button>\r\n      </div>)}\r\n      <div>\r\n        <Button size={\"small\"} onClick={onclick} style={{position: \"absolute\", right: \"25px\", bottom: \"10px\"}}>Save</Button>\r\n      </div>\r\n    </Card>\r\n  )\r\n}\r\n\r\nconst NEW_ITEM = \"NEW_ITEM\";\r\nconst Option = Select.Option;\r\n\r\nconst AddtoPlan = ({username, plan, list1Value, setList1Value, showList1, setshowList1, planId, setPlanId}) => {\r\n  const list1Options = plan.map(e=>e.title)\r\n  const [newPlan] = useMutation(NEWPLAN_MUTATION)\r\n  const setDisplayValue = (v) => {\r\n    setList1Value(v);\r\n    const _id = plan.filter(e=>e.title === v)[0]._id\r\n    setPlanId(_id)\r\n  }\r\n  const onChangeList1 = (value) => {\r\n    if (value !== NEW_ITEM) {\r\n      setDisplayValue(value)\r\n    } else {\r\n      setshowList1(true)\r\n    }\r\n  };\r\n\r\n  const onConfirm = async (inputValue) => {\r\n    inputValue = inputValue.trim();\r\n    if (list1Options.includes(inputValue)) {\r\n      setshowList1(false)\r\n      setDisplayValue(inputValue)\r\n    } else {\r\n      setshowList1(false)\r\n      const _id = await newPlan({variables:{username:username,title:inputValue}})\r\n      setPlanId(_id.data.newPlan)\r\n      setList1Value(inputValue)\r\n    }\r\n  };\r\n\r\n  const list1SelectOptions = list1Options.map(o => (\r\n    <Option key={o}>{o}</Option>\r\n  ));\r\n\r\n    return (\r\n      <div>\r\n        <Select\r\n          value={list1Value}\r\n          style={{ width: 100 }}\r\n          onChange={onChangeList1}\r\n        >\r\n          {list1SelectOptions}\r\n          <Option value={NEW_ITEM}>+ New Plan</Option>\r\n        </Select>\r\n\r\n        <SweetAlert\r\n          show={showList1}\r\n          title=\"Add New Plan\"\r\n          text=\"Enter new Plan Name\"\r\n          showCancelButton\r\n          type=\"input\"\r\n          inputPlaceholder=\"Enter Plan Name\"\r\n          animation=\"slide-from-top\"\r\n          validationMsg=\"Please enter a name!\"\r\n          onConfirm={onConfirm}\r\n          onCancel={() => {\r\n            setshowList1(false);\r\n          }}\r\n          onEscapeKey={() => {setshowList1(false)}}\r\n          onOutsideClick={() => {setshowList1(false)}}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\nexport default AddPlace\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport 'antd/dist/antd.css'\r\nimport { Input, Layout, Menu, Breadcrumb, Button, Card} from 'antd';\r\nimport { TagOutlined, CheckOutlined} from '@ant-design/icons';\r\n\r\nconst { Header, Content, Footer, Sider } = Layout;\r\nconst { Search } = Input\r\n\r\nconst SearchInfo = () => {\r\n  const onSearch = value => console.log(value);\r\n  return (\r\n    <Search placeholder=\"input search text\" onSearch={onSearch} enterButton size=\"default\"\r\n      style={{position: \"relative\", bottom: \"0%\"}}/>\r\n  )\r\n}\r\n\r\nexport default SearchInfo","import React, { useState, useEffect } from \"react\"\r\nimport {useHistory} from 'react-router-dom';\r\nimport { useQuery, useMutation } from '@apollo/react-hooks'\r\nimport MapBox from \"../components/Mapbox_TW\"\r\nimport AddPlace from \"../components/AddPlace\"\r\nimport SearchInfo from \"../components/SearchInfo\"\r\nimport { Form, Checkbox, Input, Layout, Menu, Breadcrumb, Button, \r\n    Drawer, Col, Row, Select, DatePicker } from 'antd';\r\nimport { ExportOutlined, HeartOutlined, LockOutlined, UserOutlined, PictureOutlined, EnvironmentOutlined, PlusOutlined} from '@ant-design/icons';\r\nimport usePlan from '../components/usePlan'\r\n\r\nimport {\r\n//     // for query\r\n//     MARKER_QUERY,\r\n//     PLAN_QUERY,\r\n    USERPLAN_QUERY,\r\n    // SIGNIN_QUERY,\r\n//     // for mutation\r\n//     ADD_MARKER_MUTATION,\r\n//     DELETE_MARKER_MUTATION,\r\n//     UPDATE_MARKER_MUTATION,\r\n//     NEW_PLAN_MUTATION,\r\n//     RENAME_PLAN_MUTATION,\r\n//     DELETE_PLAN_MUTATION,\r\n//     NEW_SPOT_MUTATION,\r\n//     delete_Spot_MUTATION,\r\n//     UPDATE_SPOTSTARTTIME_MUTATION,\r\n//     UPDATE_SPOTENDTIME_MUTATION,\r\n    // SIGNUP_MUTATION\r\n//     // for subscription\r\nUSERNAME_QUERY,\r\n  } from '../graphql' \r\n\r\nimport \"./TourMap.css\"\r\nimport 'antd/dist/antd.css'\r\n\r\nconst { SubMenu } = Menu;\r\nconst { Header, Content, Footer, Sider } = Layout;\r\nconst { Option } = Select;\r\n\r\nconst TourMap = (props) => {\r\n    const [title, setTitle] = useState(\"\");\r\n    const [description, setDescription] = useState(\"\");\r\n\r\n    // const {data:usernameData} = useQuery(USERNAME_QUERY, {variables:{_id:props.match.params.userId}})\r\n\r\n    const {plan, error, username} = usePlan(props.match.params.userId)\r\n\r\n    // const username = usernameData? usernameData.Username : \"\"\r\n    const [currentMarker, setCurrentMarker] = useState(null)\r\n    const [insertionMode, _setInsertionMode] = useState(false)\r\n    const setInsertionMode = (mode) => {_setInsertionMode(mode)}\r\n    const [showUsermMenu, setShowUsermMenu] = useState(false)\r\n    const history = useHistory();\r\n\r\n    const markerCallback = (marker) => { setCurrentMarker(marker) }\r\n    const toTourPlan = () => {\r\n        history.push(`${history.location.pathname}/TourPlan`)\r\n    }\r\n    const Logout = () => {\r\n        history.push(\"/\")\r\n    }\r\n    return (\r\n        <React.Fragment>\r\n            <Layout style={{minWidth: \"1000px\"}}>\r\n            <Header className=\"header\" style={{color: \"white\", fontSize: \"20px\"}}>Tour Map\r\n                <div className=\"logo\" />\r\n                <Menu theme=\"dark\" mode=\"horizontal\" defaultSelectedKeys={['2']}>\r\n                    <Menu.Item \r\n                        // className=\"mh7\"\r\n                        icon={<UserOutlined />} key=\"4\" style={{position:'absolute', width: '150px',textAlign: 'center', right: '0%'}} onClick={() => {setShowUsermMenu(!showUsermMenu)}}>\r\n                        {username}\r\n                    </Menu.Item>\r\n                </Menu>\r\n            </Header>\r\n            <Layout>\r\n            <Sider height={500} width={200} className=\"site-layout-background\">\r\n                <AddPlace username={username} currentMarker={currentMarker} plan={plan} insertionMode={insertionMode}\r\n                        title={title} setTitle={setTitle} description={description}\r\n                        setDescription={setDescription} setCurrentMarker={setCurrentMarker}></AddPlace>\r\n            </Sider>\r\n            <Layout style={{ padding: '0 24px 24px' }}>\r\n                <Breadcrumb style={{ margin: '16px 0' }}>\r\n                <Breadcrumb.Item>Home</Breadcrumb.Item>\r\n                </Breadcrumb>\r\n                <Content\r\n                className=\"site-layout-background\"\r\n                style={{\r\n                    padding: 24,\r\n                    margin: 0,\r\n                    minHeight: 280,\r\n                }}\r\n                >\r\n                <MapBox username={username} markerCallback={markerCallback} insertionMode={insertionMode}\r\n                    title={title} setTitle={setTitle} description={description} setInsertionMode={setInsertionMode}\r\n                        setDescription={setDescription}></MapBox>\r\n                {showUsermMenu?( //show menu if click account button\r\n                <div style={{position: \"absolute\", width: '150px', textAlign: 'center',top: \"65px\", right: '0%', hidden: 'true'}} zindex={-1}>\r\n                    <Menu theme=\"blue\" mode=\"vertical\">\r\n                    <Menu.Item \r\n                        icon ={<EnvironmentOutlined/>}\r\n                        key=\"1\" style={{margin: '0px', textAlign: 'left', position: \"relative\", left: \"23px\"}} onClick={toTourPlan}>\r\n                        {/* <Link to=\"/\">Tour Map</Link> */}\r\n                        Tour Plan\r\n                    </Menu.Item>\r\n                    <Menu.Item \r\n                        icon ={<ExportOutlined/>}\r\n                        key=\"2\" style={{left: '0px', textAlign: 'left', position: \"relative\", left: \"23px\"}} onClick={\r\n                        Logout\r\n                        }>\r\n                        Logout\r\n                    </Menu.Item>\r\n                    </Menu>\r\n                </div>):null\r\n                }\r\n                </Content>\r\n            </Layout>\r\n            </Layout>\r\n            </Layout>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default TourMap;\r\n\r\n\r\n\r\n\r\n// class App extends React.Component {\r\n//   state = { visible: false };\r\n\r\n//   showDrawer = () => {\r\n//     this.setState({\r\n//       visible: true,\r\n//     });\r\n//   };\r\n\r\n//   onClose = () => {\r\n//     this.setState({\r\n//       visible: false,\r\n//     });\r\n//   };\r\n\r\n//   render() {\r\n//     return (\r\n//       <div className=\"site-drawer-render-in-current-wrapper\">\r\n//         Render in this\r\n//         <div style={{ marginTop: 16 }}>\r\n//           <Button type=\"primary\" onClick={this.showDrawer}>\r\n//             Open\r\n//           </Button>\r\n//         </div>\r\n//         <Drawer\r\n//           title=\"Basic Drawer\"\r\n//           placement=\"right\"\r\n//           closable={false}\r\n//           onClose={this.onClose}\r\n//           visible={this.state.visible}\r\n//           getContainer={false}\r\n//           style={{ position: 'absolute' }}\r\n//         >\r\n//           <p>Some contents...</p>\r\n//         </Drawer>\r\n//       </div>\r\n//     );\r\n//   }\r\n// }\r\n\r\n// ReactDOM.render(<App />, mountNode);","export default __webpack_public_path__ + \"static/media/place-of-destination.803d6944.png\";","export default __webpack_public_path__ + \"static/media/bucket_list.e3f28f8a.jpg\";","import React, { useContext, useState, useEffect, useRef } from 'react';\r\nimport { useQuery, useMutation } from '@apollo/react-hooks'\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Tooltip, Form, Checkbox, Input, Layout, Menu, Breadcrumb, Button, Table, Popconfirm,\r\n    Drawer, Col, Row, Select, Space} from 'antd';\r\n// import Highlighter from 'react-highlight-words';\r\n// import { SearchOutlined } from '@ant-design/icons';    \r\nimport { ExportOutlined, LockOutlined, UserOutlined, PictureOutlined, EnvironmentOutlined, PlusOutlined} from '@ant-design/icons';\r\nimport 'antd/dist/antd.css'\r\nimport './TourPlan.css'\r\nimport usePlan from '../components/usePlan'\r\nimport {\r\n//     // for query\r\n//     PLAN_QUERY,\r\n    USERNAME_QUERY,\r\n    USERPLAN_QUERY,\r\n//     // for mutation\r\n//     NEW_PLAN_MUTATION,\r\n//     RENAME_PLAN_MUTATION,\r\n    DELETE_PLAN_MUTATION,\r\n//     NEW_SPOT_MUTATION,\r\n    DELETE_SPOT_MUTATION,\r\n    UPDATE_SPOT_STARTTIME_MUTATION,\r\n    UPDATE_SPOT_ENDTIME_MUTATION,\r\n//     // for subscription\r\n  } from '../graphql'\r\nimport background from '../img/place-of-destination.png';\r\nimport bucketList from '../img/bucket_list.jpg';\r\nimport pointLeft from '../img/point_left.png';\r\n\r\nconst { SubMenu } = Menu;\r\nconst { Header, Content, Footer, Sider } = Layout;\r\n\r\nexport default function TourPlan(props){\r\n    // const [username, setUsername] = useState(\"\")\r\n    // const {data:usernameData} = useQuery(USERNAME_QUERY, {variables:{_id:props.match.params.userId}})\r\n    // const {data:usernameData} = useQuery(USERNAME_QUERY, {variables:{_id:props.match.params.userId}})\r\n    const {plan:planState, error, username} = usePlan(props.match.params.userId)\r\n\r\n    const [deletePlan] = useMutation(DELETE_PLAN_MUTATION)\r\n    const [deleteSpot] = useMutation(DELETE_SPOT_MUTATION)\r\n    const [updateSpotStartTime] = useMutation(UPDATE_SPOT_STARTTIME_MUTATION)\r\n    const [updateSpotEndTime] = useMutation(UPDATE_SPOT_ENDTIME_MUTATION)\r\n\r\n    // const username = usernameData? usernameData.Username : null\r\n    // console.log(planState)\r\n    // console.log(usrename)\r\n    const [showUsermMenu, setShowUsermMenu] = useState(false)\r\n    const [re, setre] = useState(true)\r\n    const [currentPlan, setCurrentPlan] = useState(0)\r\n    const [currentSpot, setCurrentSpot] = useState(0)\r\n    const [initialPlan, setInitialPlan] = useState(true)\r\n    const [newTime, setTime] = useState(false)\r\n    const [newStartTime, setnewStartTime] = useState(\"\")\r\n    const [newEndTime, setnewEndTime] = useState(\"\")\r\n\r\n    const history = useHistory();\r\n    const backToMap = () => {\r\n         history.push(`/${props.match.params.userId}`)\r\n    }\r\n    const logout = () => {\r\n         history.push(\"/\")\r\n    }\r\n    \r\n    const handleStartChange = (ev) => {\r\n        if (!ev.target['validity'].valid) return;\r\n        const dt = ev.target['value'] + ':00Z';\r\n        setnewStartTime(dt);\r\n        // console.log(dt)\r\n    }\r\n    const handleEndChange = (ev) => {\r\n        if (!ev.target['validity'].valid) return;\r\n        const dt = ev.target['value'] + ':00Z';\r\n        setnewEndTime(dt);\r\n        // console.log(dt)\r\n      }\r\n    return (\r\n        <React.Fragment>\r\n            <Layout>\r\n            <Header className=\"header\" style={{color: \"white\", fontSize: \"20px\", margin: \"0px\"}}>Tour Plan\r\n                <div className=\"logo\" />\r\n                <Menu theme=\"dark\" mode=\"horizontal\" defaultSelectedKeys={['2']}>\r\n                    <Menu.Item icon={<UserOutlined />} key=\"4\" style={{position:'absolute', width: '150px',textAlign: 'center', right: '0%'}} onClick={() => {setShowUsermMenu(!showUsermMenu)}}>\r\n                        {username}\r\n                    </Menu.Item>\r\n                </Menu>\r\n            </Header>\r\n            <Layout className='middle'>\r\n            <Sider height={500} width={200} className=\"site-layout-background\">\r\n                <Menu\r\n                mode=\"inline\"\r\n                defaultSelectedKeys={['1']}\r\n                defaultOpenKeys={['sub1']}\r\n                style={{ height: '100%', borderRight: 0}}\r\n                >\r\n                <SubMenu key=\"sub1\" icon={<EnvironmentOutlined />} title=\"My Plans\">\r\n                    {\r\n                      planState.map(({ title }, i) => (\r\n                        <Menu.Item onClick={() => {\r\n                            setCurrentPlan(i)\r\n                            setInitialPlan(false)\r\n                        }} style={{display: \"flex\", alignItems: \"center\"}}>\r\n                            {title}\r\n                            <Button \r\n                            className=\"deletePlan\"\r\n                            type=\"dashed\"\r\n                            size=\"small\"\r\n                            style={{position: \"absolute\", right: \"10px\", fontSize: \"5px\"}}\r\n                            onClick={() => {\r\n                                deletePlan({variables:{\r\n                                    _id: planState[i]._id\r\n                                  }})\r\n                                setre(!re)\r\n                                // console.log(planState)\r\n                            }}\r\n                            >x</Button>\r\n                        </Menu.Item>\r\n                      ))\r\n                    }\r\n                </SubMenu>\r\n                </Menu>\r\n            </Sider>\r\n            <Layout style={{ padding: '0 24px 24px' }}>\r\n            <Breadcrumb style={{ margin: '16px 0' }}>\r\n                <Breadcrumb.Item>Home</Breadcrumb.Item>\r\n                <Breadcrumb.Item>Plan List</Breadcrumb.Item>\r\n                {(!planState || planState.length === 0)?(<Breadcrumb.Item></Breadcrumb.Item>)\r\n                :(<Breadcrumb.Item>{planState[currentPlan].title}</Breadcrumb.Item>)}   \r\n                </Breadcrumb>\r\n                <Content\r\n                className=\"site-layout-background\"\r\n                style={{\r\n                    padding: 24,\r\n                    margin: 0,\r\n                    minHeight: 280,\r\n                }}\r\n                >\r\n                    {(initialPlan && !(!planState || planState.length === 0))?(\r\n                        <React.Fragment>\r\n                            <h3 style={{margin: \"0px\", position: \"relative\", left: \"0px\"}}>Choose a Plan in the Left</h3> \r\n                            <br></br>\r\n                            <br></br>\r\n                            <img style={{width: \"100px\"}} src={pointLeft} alt=\"pointLeft\"/>\r\n                        </React.Fragment>\r\n                        ):\r\n                        (\r\n                    <React.Fragment>\r\n                    <div className=\"table-title\">\r\n                        {(!planState || planState.length === 0)?(<h3></h3>):(<h3 style={{margin: \"0px\", position: \"relative\", left: \"0px\"}}> {planState[currentPlan].title} </h3>)}\r\n                    </div>\r\n                    {((!planState || planState.length === 0)?(\r\n                        <div className=\"table-title\" style={{textAlign: \"center\"}}> \r\n                            <h2 style={{fontFamily: \"fantasy\"}}> No Plan Right Now </h2> \r\n                            <br></br>\r\n                            <img src={bucketList} alt=\"Bucket List\" style={{width: \"500px\"}}/>\r\n                        </div>):\r\n                        (<React.Fragment>\r\n                            {(planState[currentPlan].spots.length !== 0)?(\r\n                                <table className=\"table-fill\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th className='spot-title' >Title</th>\r\n                                        <th className='spot-description' >Description</th>\r\n                                        <th >Time</th>\r\n                                        <th className='spot-button'></th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {planState[currentPlan].spots.map((e, i) => (\r\n                                        <tr key={i}>\r\n                                            <td className='spot-title' > {e.location.properties.title} </td>\r\n                                            <td className='spot-description' > {e.location.properties.description} </td>\r\n                                            <td className='spot-time' >\r\n                                            <p>{new Date(e.startTime).toLocaleString()}</p>\r\n                                            <p className=\"timeto\">to</p>\r\n                                            <p>{new Date(e.endTime).toLocaleString()}</p> \r\n                                            </td>\r\n                                            <td className='spot-button'>\r\n                                                <Button onClick={() => {setTime(true)\r\n                                                setCurrentSpot(i)}} \r\n                                                style={{width:\"100px\", textAlign: \"center\", fontSize: \"10px\"}}> Edit Time</Button>\r\n                                                <React.Fragment>\r\n                                                    <Drawer\r\n                                                        title={planState[currentPlan].spots[currentSpot].location.properties.title}\r\n                                                        width={360}\r\n                                                        onClose={() => {setTime(false)}}\r\n                                                        visible={newTime}\r\n                                                        bodyStyle={{ paddingBottom: 80 }}\r\n                                                        footer={\r\n                                                            <div\r\n                                                                style={{\r\n                                                                    textAlign: 'right',\r\n                                                            }}\r\n                                                        >\r\n                                                            <Button onClick={() => {setTime(false)}} style={{ marginRight: 8 }}>\r\n                                                                Cancel\r\n                                                            </Button>\r\n                                                            {/* <Button onClick={registerAccount} */}\r\n                                                            <Button onClick={() => {\r\n                                                                updateSpotStartTime({variables:{\r\n                                                                    _id: planState[currentPlan].spots[currentSpot]._id,\r\n                                                                    time: new Date(newStartTime).toString()\r\n                                                                }})\r\n                                                                updateSpotEndTime({variables:{\r\n                                                                    _id: planState[currentPlan].spots[currentSpot]._id,\r\n                                                                    time: new Date(newEndTime).toString()\r\n                                                                }})\r\n                                                                setTime(false)\r\n                                                                // setre(!re)\r\n                                                                console.log(new Date(newStartTime).toString(), new Date(newEndTime).toString())\r\n                                                            }}\r\n                                                                type=\"primary\">\r\n                                                                Change Time\r\n                                                            </Button>\r\n                                                        </div>\r\n                                                    }\r\n                                                    >\r\n                                                        <Form layout=\"vertical\" hideRequiredMark>\r\n                                                            <Row gutter={16}>\r\n                                                                <Col>\r\n                                                                    <Form.Item\r\n                                                                        name=\"Start time\"\r\n                                                                        label=\"Start time\"\r\n                                                                        rules={[{ required: true, message: 'Please enter new start time' }]}\r\n                                                                        >\r\n                                                                        <input \r\n                                                                            type=\"datetime-local\"\r\n                                                                            name=\"start time\"\r\n                                                                            value={(newStartTime || '').toString().substring(0, 16)}\r\n                                                                            onChange={handleStartChange} />\r\n                                                                    </Form.Item>\r\n                                                                </Col>\r\n                                                            </Row>\r\n                                                            <Row gutter={16}>\r\n                                                                <Col>\r\n                                                                    <Form.Item\r\n                                                                        name=\"End time\"\r\n                                                                        label=\"End time\"\r\n                                                                        rules={[{ required: true, message: 'Please enter new end time' }]}\r\n                                                                        >\r\n                                                                        <input \r\n                                                                            type=\"datetime-local\"\r\n                                                                            name=\"end time\"\r\n                                                                            value={(newEndTime || '').toString().substring(0, 16)}\r\n                                                                            onChange={handleEndChange} />\r\n                                                                    </Form.Item>\r\n                                                                </Col>\r\n                                                            </Row>\r\n                                                        </Form>\r\n                                                    </Drawer>\r\n                                                </React.Fragment>\r\n                                                <Button onClick={()=>{\r\n                                                    // var temp = planState\r\n                                                    // temp[currentPlan].spots.splice(i, 1)\r\n                                                    // setPlan(temp)\r\n                                                    setre(!re)\r\n                                                    deleteSpot({variables:{\r\n                                                        _id: planState[currentPlan].spots[currentSpot]._id\r\n                                                    }})                \r\n                                                }} style={{width:\"100px\", textAlign: \"center\", fontSize: \"10px\"}}> Delete Spot</Button> \r\n                                            </td>\r\n                                        </tr>\r\n                                    ))}\r\n                                </tbody>\r\n                            </table>):(\r\n                                <div className=\"table-title\" style={{textAlign: \"center\"}}> \r\n                                    <h2 style={{fontFamily: \"fantasy\"}}> No Spot Right Now </h2> \r\n                                    <img src={background} alt=\"Background\"/>\r\n                                </div>\r\n                                )}\r\n                        </React.Fragment>))} \r\n                        </React.Fragment>              \r\n                    )\r\n                    }\r\n                \r\n                {showUsermMenu?( //show menu if click account button\r\n                <div style={{position: \"absolute\", width: '150px', textAlign: 'center',top: \"65px\", right: '0%', hidden: 'true'}} zindex={-1}>\r\n                    <Menu theme=\"blue\" mode=\"vertical\">\r\n                    <Menu.Item \r\n                        icon ={<EnvironmentOutlined/>}\r\n                        key=\"1\" style={{margin: '0px', textAlign: 'left', position: \"relative\", left: \"23px\"}} onClick={backToMap}>\r\n                        Tour Map\r\n                    </Menu.Item>\r\n                    <Menu.Item \r\n                        icon ={<ExportOutlined/>}\r\n                        key=\"2\" style={{margin: '0px', textAlign: 'left', position: \"relative\", left: \"23px\"}} onClick={logout}>\r\n                        logout\r\n                    </Menu.Item>\r\n                    </Menu>\r\n                </div>):null\r\n                }\r\n                </Content>\r\n            </Layout>\r\n            </Layout>\r\n            </Layout>\r\n        </React.Fragment>\r\n    )\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport TourMap from './containers/TourMap';\r\nimport TourPlan from './containers/TourPlan';\r\nimport Login from './containers/Login'\r\n\r\nimport {HashRouter,Route} from 'react-router-dom';\r\n\r\n// import {\r\n//     BrowserRouter as Router,\r\n//     Switch,\r\n//     Route,\r\n//     Link\r\n// } from \"react-router-dom\";\r\n  \r\n\r\n// import reportWebVitals from './reportWebVitals';\r\n\r\nimport { ApolloClient, InMemoryCache } from 'apollo-boost'\r\nimport { ApolloProvider } from 'react-apollo'\r\nimport { split } from 'apollo-link'\r\nimport { HttpLink } from 'apollo-link-http'\r\nimport { WebSocketLink } from 'apollo-link-ws'\r\nimport { getMainDefinition } from 'apollo-utilities'\r\n\r\n// Create an http link:\r\nconst httpLink = new HttpLink({\r\n    uri: 'http://localhost:4000/'\r\n})\r\n\r\n// Create a WebSocket link:\r\nconst wsLink = new WebSocketLink({\r\n    uri: `ws://localhost:4000/`,\r\n    options: { reconnect: true }\r\n})\r\n\r\n// using the ability to split links, you can send data to each link\r\n// depending on what kind of operation is being sent\r\nconst link = split(\r\n// split based on operation type\r\n({ query }) => {\r\n    const definition = getMainDefinition(query)\r\n    return (\r\n        definition.kind === 'OperationDefinition' &&\r\n        definition.operation === 'subscription')},\r\n        wsLink,\r\n        httpLink\r\n        )\r\n\r\nconst client = new ApolloClient({\r\n    link,\r\n    cache: new InMemoryCache().restore({})\r\n})\r\n\r\nReactDOM.render(\r\n    <ApolloProvider client={client}>\r\n        <HashRouter>\r\n            <Route exact path=\"/\" component={Login}/>\r\n            <Route exact path=\"/:userId\" component={TourMap} />\r\n            <Route exact path=\"/:userId/TourPlan\" component={TourPlan} />\r\n        </HashRouter>\r\n    </ApolloProvider>,\r\n    document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\n// reportWebVitals();\r\n","import React, { useState, useEffect, useCallback } from \"react\"\r\nimport {useHistory} from 'react-router-dom';\r\nimport { useQuery, useMutation } from '@apollo/react-hooks'\r\nimport MapBox from \"../components/Mapbox_TW\"\r\nimport AddPlace from \"../components/AddPlace\"\r\nimport SearchInfo from \"../components/SearchInfo\"\r\nimport { Form, Checkbox, Input, Layout, Menu, Breadcrumb, Button, \r\n    Drawer, Col, Row, Select, DatePicker } from 'antd';\r\nimport { LockOutlined, UserOutlined, PictureOutlined, EnvironmentOutlined, PlusOutlined} from '@ant-design/icons';\r\n\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route,\r\n    Link,\r\n    useRouteMatch,\r\n    useParams\r\n} from \"react-router-dom\"; \r\nimport TourPlan from \"./TourPlan\"\r\n\r\nimport \"./TourMap.css\"\r\nimport 'antd/dist/antd.css'\r\nimport './Login.css'\r\n\r\nimport {\r\n//     // for query\r\n//     MARKER_QUERY,\r\n//     PLAN_QUERY,\r\n    SIGNIN_QUERY,\r\n//     // for mutation\r\n//     ADD_MARKER_MUTATION,\r\n//     DELETE_MARKER_MUTATION,\r\n//     UPDATE_MARKER_MUTATION,\r\n//     NEW_PLAN_MUTATION,\r\n//     RENAME_PLAN_MUTATION,\r\n//     DELETE_PLAN_MUTATION,\r\n//     NEW_SPOT_MUTATION,\r\n//     delete_Spot_MUTATION,\r\n//     UPDATE_SPOTSTARTTIME_MUTATION,\r\n//     UPDATE_SPOTENDTIME_MUTATION,\r\n    SIGNUP_MUTATION\r\n//     // for subscription\r\n  } from '../graphql'\r\n// import { Switch } from \"@material-ui/core\"\r\n\r\n\r\nexport default function Login(){\r\n    const [username, setUsername] = useState(\"\")\r\n    const [password, setPassword] = useState(\"\")\r\n    const [register, setRegister] = useState(false)\r\n    const {data:signIndata, error:signInError} = useQuery(SIGNIN_QUERY, {variables: {username, password}})\r\n    const [signUp]= useMutation(SIGNUP_MUTATION)\r\n    const[regisUsername, setRegisUsername] = useState(\"\")\r\n    const[regisPassword, setRegisPassword] = useState(\"\")\r\n    const[regisRetype, setRegisRetype] = useState(\"\")\r\n    const [showUsermMenu, setShowUsermMenu] = useState(false)\r\n\r\n    const history = useHistory();\r\n    // const handleRout = useCallback(() => history.push(`/${signIndata}`), [history]);\r\n\r\n    const onFinish = (values) => {\r\n        setUsername(values.username)\r\n        setPassword(values.password)\r\n    };\r\n\r\n    useEffect(() => {\r\n        console.log(signIndata)\r\n        if(signIndata) history.push(`/${signIndata.signIn}`)\r\n    }, [signIndata])\r\n\r\n    useEffect(() =>{\r\n        if(!signInError || !username) return\r\n        alert(signInError.message)\r\n    }, [signInError])\r\n    const enter_registerAccount = (event)=>{\r\n        if(event.keyCode===13){\r\n            registerAccount()\r\n        }\r\n    }\r\n    const registerAccount = async () => {\r\n        if(regisUsername === \"\"){\r\n            alert(\"Please enter username\")\r\n            return\r\n        }\r\n        if(regisPassword === \"\"){\r\n            alert(\"Please enter password\")\r\n            return\r\n        }\r\n        if(regisRetype === \"\"){\r\n            alert(\"Please retype password\")\r\n            return\r\n        }\r\n        if(regisPassword !== regisRetype){\r\n            alert(\"Password mismatch\")\r\n            return\r\n        }\r\n        try{\r\n            await signUp({variables: {username: regisUsername, password: regisPassword}})\r\n            alert(`Welcome to join us, ${regisUsername}!`)\r\n            setRegister(false)\r\n        }\r\n        catch(err){\r\n            alert(err)\r\n            return\r\n        }\r\n    }\r\n    return (\r\n    <React.Fragment>\r\n        <div className='login-background'>\r\n        <div className='login-root'>\r\n            <div className='login-section'>\r\n                <h5 className='login-title'>Welcome to Jose Antonio LoverBus !</h5>\r\n                <Form \r\n                name=\"normal_login\"\r\n                className=\"login-form\"\r\n                initialValues={{\r\n                    remember: true,\r\n                }}\r\n                onFinish={onFinish} // summit user info\r\n                >\r\n                <Form.Item\r\n                    name=\"username\"\r\n                    rules={[\r\n                    {\r\n                        required: true,\r\n                        message: 'Please input your Username!',\r\n                    },\r\n                    ]}\r\n                >\r\n                    <Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"Username\" />\r\n                </Form.Item>\r\n                <Form.Item\r\n                    name=\"password\"\r\n                    rules={[\r\n                    {\r\n                        required: true,\r\n                        message: 'Please input your Password!',\r\n                    },\r\n                    ]}\r\n                >\r\n                    <Input\r\n                    prefix={<LockOutlined className=\"site-form-item-icon\" />}\r\n                    type=\"password\"\r\n                    placeholder=\"Password\"\r\n                    />\r\n                </Form.Item>\r\n                <Form.Item>\r\n                    <Form.Item name=\"remember\" valuePropName=\"checked\" noStyle>\r\n                    <Checkbox>Remember me</Checkbox>\r\n                    </Form.Item>\r\n                </Form.Item>\r\n\r\n                <Form.Item>\r\n                    <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\r\n                    Log in\r\n                    </Button>\r\n                    Or  \r\n                    <React.Fragment>\r\n                        <a className='register-link' onClick={() => setRegister(true)}>\r\n                            Register Now\r\n                        </a>\r\n                        <Drawer\r\n                            title=\"Create a new account\"\r\n                            width={360}\r\n                            onClose={() => setRegister(false)}\r\n                            visible={register}\r\n                            bodyStyle={{ paddingBottom: 80 }}\r\n                            footer={\r\n                                <div\r\n                                    style={{\r\n                                        textAlign: 'right',\r\n                                }}\r\n                            >\r\n                                <Button onClick={() => setRegister(false)} style={{ marginRight: 8 }}>\r\n                                    Cancel\r\n                                </Button>\r\n                                <Button onClick={registerAccount} type=\"primary\">\r\n                                    Submit\r\n                                </Button>\r\n                            </div>\r\n                        }\r\n                        >\r\n                            <Form layout=\"vertical\" hideRequiredMark>\r\n                                <Row gutter={16}>\r\n                                    <Col>\r\n                                        <Form.Item\r\n                                            name=\"username\"\r\n                                            label=\"Username\"\r\n                                            rules={[{ required: true, message: 'Please enter username' }]}\r\n                                            >\r\n                                            <Input placeholder=\"Please enter username\"\r\n                                                onChange={e=>setRegisUsername(e.target.value)}\r\n                                                onKeyUp={enter_registerAccount}\r\n                                            />\r\n                                        </Form.Item>\r\n                                    </Col>\r\n                                </Row>\r\n                                <Row gutter={16}>\r\n                                    <Col>\r\n                                        <Form.Item\r\n                                            name=\"password\"\r\n                                            label=\"Password\"\r\n                                            rules={[{ required: true, message: 'Please enter password' }]}\r\n                                            >\r\n                                            <Input placeholder=\"Please enter password\" type=\"password\"\r\n                                                onChange={e=>setRegisPassword(e.target.value)}\r\n                                                onKeyUp={enter_registerAccount}\r\n                                            />\r\n                                        </Form.Item>\r\n                                    </Col>\r\n                                </Row>\r\n                                <Row gutter={16}>\r\n                                    <Col>\r\n                                        <Form.Item\r\n                                            name=\"Retype password\"\r\n                                            label=\"Retype Password\"\r\n                                            rules={[{ required: true, message: 'Please retype password' }]}\r\n                                            >\r\n                                            <Input placeholder=\"Please retype your password\" type=\"password\"\r\n                                                onChange={e=>setRegisRetype(e.target.value)}\r\n                                                onKeyUp={enter_registerAccount}\r\n                                            />\r\n                                        </Form.Item>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Form>\r\n                        </Drawer>\r\n                    </React.Fragment>\r\n                </Form.Item>\r\n                </Form>\r\n                </div>\r\n            </div>\r\n            </div>\r\n    </React.Fragment>\r\n    )\r\n\r\n}","export default \"data:image/png;base64,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\""],"sourceRoot":""}